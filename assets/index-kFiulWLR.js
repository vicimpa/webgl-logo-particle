(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=t(o);fetch(o.href,a)}})();/* @license twgl.js 7.0.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */const Mr=5120,Ve=5121,wr=5122,Nr=5123,Or=5124,Ur=5125,Lr=5126,On=32819,Un=32820,Ln=33635,Gn=5131,kn=33640,Hn=35899,zn=35902,Vn=36269,gn=34042,Gr={};{const e=Gr;e[Mr]=Int8Array,e[Ve]=Uint8Array,e[wr]=Int16Array,e[Nr]=Uint16Array,e[Or]=Int32Array,e[Ur]=Uint32Array,e[Lr]=Float32Array,e[On]=Uint16Array,e[Un]=Uint16Array,e[Ln]=Uint16Array,e[Gn]=Uint16Array,e[kn]=Uint32Array,e[Hn]=Uint32Array,e[zn]=Uint32Array,e[Vn]=Uint32Array,e[gn]=Uint32Array}function Xn(e){if(e instanceof Int8Array)return Mr;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return Ve;if(e instanceof Int16Array)return wr;if(e instanceof Uint16Array)return Nr;if(e instanceof Int32Array)return Or;if(e instanceof Uint32Array)return Ur;if(e instanceof Float32Array)return Lr;throw new Error("unsupported typed array type")}function kr(e){const r=Gr[e];if(!r)throw new Error("unknown gl type");return r}const ge=typeof SharedArrayBuffer<"u"?function(r){return r&&r.buffer&&(r.buffer instanceof ArrayBuffer||r.buffer instanceof SharedArrayBuffer)}:function(r){return r&&r.buffer&&r.buffer instanceof ArrayBuffer};function Hr(...e){console.error(...e)}const ft=new Map;function Ye(e,r){if(!e||typeof e!="object")return!1;let t=ft.get(r);t||(t=new WeakMap,ft.set(r,t));let n=t.get(e);if(n===void 0){const o=Object.prototype.toString.call(e);n=o.substring(8,o.length-1)===r,t.set(e,n)}return n}function $n(e,r){return typeof WebGLBuffer<"u"&&Ye(r,"WebGLBuffer")}function zr(e,r){return typeof WebGLTexture<"u"&&Ye(r,"WebGLTexture")}function Kn(e,r){return typeof WebGLSampler<"u"&&Ye(r,"WebGLSampler")}const Yn=35044,Vr=34962,Wn=34963;function Zn(e,r,t,n,o){e.bindBuffer(r,t),e.bufferData(r,n,o||Yn)}function qn(e,r,t,n){if($n(e,r))return r;t=t||Vr;const o=e.createBuffer();return Zn(e,t,o,r,n),o}function jn(e){return e==="indices"}function Jn(e,r){if(ge(e))return e;if(ge(e.data))return e.data;Array.isArray(e)&&(e={data:e});let t=e.type?Qn(e.type):void 0;return t||(jn(r)?t=Uint16Array:t=Float32Array),new t(e.data)}function Qn(e){return typeof e=="number"?kr(e):e||Float32Array}function xt(e,r,t){const n=t==="indices"?Wn:Vr,o=Jn(r,t);return qn(e,o,n)}function ie(e){return!!e.texStorage2D}const gr=(function(){const e={},r={};function t(n){const o=n.constructor.name;if(!e[o]){for(const a in n)if(typeof n[a]=="number"){const s=r[n[a]];r[n[a]]=s?`${s} | ${a}`:a}e[o]=!0}}return function(o,a){return t(o),r[a]||(typeof a=="number"?`0x${a.toString(16)}`:a)}})(),ee=void 0,H={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{},crossOrigin:void 0},oe=ge,Xr=(function(){let e;return function(){return e=e||(typeof document<"u"&&document.createElement?document.createElement("canvas").getContext("2d"):null),e}})(),mt=6406,M=6407,S=6408,dt=6409,Et=6410,te=6402,bt=34041,Ae=33071,Ue=9728,Le=9729,eo=9986,N=3553,O=34067,$=32879,X=35866,We=34069,to=34070,ro=34071,no=34072,oo=34073,ao=34074,Se=10241,ye=10240,Te=10242,Fe=10243,_t=32882,io=33082,so=33083,co=33084,uo=33085,lo=34892,fo=34893,Ze=3317,$r=3314,Kr=32878,Yr=3316,Wr=3315,Zr=32877,be=37443,_e=37441,Re=37440,xo=33321,mo=36756,Eo=33325,bo=33326,_o=33330,Ro=33329,Ao=33338,So=33337,yo=33340,To=33339,Fo=33323,ho=36757,Po=33327,Do=33328,Co=33336,Io=33335,Bo=33332,po=33331,vo=33334,Mo=33333,wo=32849,No=35905,Oo=36194,Uo=36758,Lo=35898,Go=35901,ko=34843,Ho=34837,zo=36221,Vo=36239,go=36215,Xo=36233,$o=36209,Ko=36227,Yo=32856,Wo=35907,Zo=36759,qo=32855,jo=32854,Jo=32857,Qo=34842,ea=34836,ta=36220,ra=36238,na=36975,oa=36214,aa=36232,ia=36226,sa=36208,ca=33189,ua=33190,la=36012,fa=36013,xa=35056,U=5120,R=5121,fe=5122,Y=5123,xe=5124,V=5125,h=5126,Rt=32819,At=32820,St=33635,v=5131,re=36193,Ge=33640,ma=35899,da=35902,Ea=36269,ba=34042,me=33319,W=33320,de=6403,Z=36244,q=36248,g=36249,yt=33776,Tt=33777,Ft=33778,ht=33779,Pt=35916,Dt=35917,Ct=35918,It=35919,Bt=36196,pt=37488,vt=37489,Mt=37490,wt=37491,Nt=37492,Ot=37493,Ut=37494,Lt=37495,Gt=37496,kt=37497,Ht=35840,zt=35841,Vt=35842,gt=35843,Xt=37808,$t=37809,Kt=37810,Yt=37811,Wt=37812,Zt=37813,qt=37814,jt=37815,Jt=37816,Qt=37817,er=37818,tr=37819,rr=37820,nr=37821,or=37840,ar=37841,ir=37842,sr=37843,cr=37844,ur=37845,lr=37846,fr=37847,xr=37848,mr=37849,dr=37850,Er=37851,br=37852,_r=37853,Rr=36492,Ar=36493,Sr=36494,yr=36495,Tr=36283,Fr=36284,hr=36285,Pr=36286;let ke;function j(e){if(!ke){const t={};t[mt]={textureFormat:mt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[R,v,re,h]},t[dt]={textureFormat:dt,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1,2,2,4],type:[R,v,re,h]},t[Et]={textureFormat:Et,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2,4,4,8],type:[R,v,re,h]},t[M]={textureFormat:M,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,6,6,12,2],type:[R,v,re,h,St]},t[S]={textureFormat:S,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,8,8,16,2,2],type:[R,v,re,h,Rt,At]},t[te]={textureFormat:te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[V,Y]},t[xo]={textureFormat:de,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[1],type:[R]},t[mo]={textureFormat:de,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[1],type:[U]},t[Eo]={textureFormat:de,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4,2],type:[h,v]},t[bo]={textureFormat:de,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[4],type:[h]},t[_o]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[R]},t[Ro]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[1],type:[U]},t[Bo]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[Y]},t[po]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[fe]},t[vo]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[V]},t[Mo]={textureFormat:Z,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[xe]},t[Fo]={textureFormat:me,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[2],type:[R]},t[ho]={textureFormat:me,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[2],type:[U]},t[Po]={textureFormat:me,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[8,4],type:[h,v]},t[Do]={textureFormat:me,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[8],type:[h]},t[Co]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[R]},t[Io]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2],type:[U]},t[Ao]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Y]},t[So]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[fe]},t[yo]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[V]},t[To]={textureFormat:W,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[xe]},t[wo]={textureFormat:M,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3],type:[R]},t[No]={textureFormat:M,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[R]},t[Oo]={textureFormat:M,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[3,2],type:[R,St]},t[Uo]={textureFormat:M,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[3],type:[U]},t[Lo]={textureFormat:M,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[h,v,ma]},t[Go]={textureFormat:M,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6,4],type:[h,v,da]},t[ko]={textureFormat:M,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[12,6],type:[h,v]},t[Ho]={textureFormat:M,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[h]},t[zo]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[R]},t[Vo]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[3],type:[U]},t[go]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[Y]},t[Xo]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[6],type:[fe]},t[$o]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[V]},t[Ko]={textureFormat:q,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[12],type:[xe]},t[Yo]={textureFormat:S,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[R]},t[Wo]={textureFormat:S,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[R]},t[Zo]={textureFormat:S,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[4],type:[U]},t[qo]={textureFormat:S,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2,4],type:[R,At,Ge]},t[jo]={textureFormat:S,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4,2],type:[R,Rt]},t[Jo]={textureFormat:S,colorRenderable:!0,textureFilterable:!0,bytesPerElement:[4],type:[Ge]},t[Qo]={textureFormat:S,colorRenderable:!1,textureFilterable:!0,bytesPerElement:[16,8],type:[h,v]},t[ea]={textureFormat:S,colorRenderable:!1,textureFilterable:!1,bytesPerElement:[16],type:[h]},t[ta]={textureFormat:g,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[R]},t[ra]={textureFormat:g,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[U]},t[na]={textureFormat:g,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ge]},t[oa]={textureFormat:g,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[Y]},t[aa]={textureFormat:g,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[8],type:[fe]},t[ia]={textureFormat:g,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[xe]},t[sa]={textureFormat:g,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[16],type:[V]},t[ca]={textureFormat:te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[2,4],type:[Y,V]},t[ua]={textureFormat:te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[V]},t[la]={textureFormat:te,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[h]},t[xa]={textureFormat:bt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[ba]},t[fa]={textureFormat:bt,colorRenderable:!0,textureFilterable:!1,bytesPerElement:[4],type:[Ea]},Object.keys(t).forEach(function(a){const s=t[a];s.bytesPerElementMap={},s.bytesPerElement.forEach(function(i,c){const u=s.type[c];s.bytesPerElementMap[u]=i})});const n={bytes:8,width:4,height:4},o={bytes:16,width:4,height:4};t[yt]={textureFormat:yt,colorRenderable:!1,textureFilterable:!0,block:n},t[Tt]={textureFormat:Tt,colorRenderable:!1,textureFilterable:!0,block:n},t[Ft]={textureFormat:Ft,colorRenderable:!1,textureFilterable:!0,block:o},t[ht]={textureFormat:ht,colorRenderable:!1,textureFilterable:!0,block:o},t[Pt]={textureFormat:Pt,colorRenderable:!1,textureFilterable:!0,block:n},t[Dt]={textureFormat:Dt,colorRenderable:!1,textureFilterable:!0,block:n},t[Ct]={textureFormat:Ct,colorRenderable:!1,textureFilterable:!0,block:o},t[It]={textureFormat:It,colorRenderable:!1,textureFilterable:!0,block:o},t[Bt]={textureFormat:Bt,colorRenderable:!1,textureFilterable:!0,block:n},t[pt]={textureFormat:pt,colorRenderable:!1,textureFilterable:!0,block:n},t[vt]={textureFormat:vt,colorRenderable:!1,textureFilterable:!0,block:n},t[Mt]={textureFormat:Mt,colorRenderable:!1,textureFilterable:!0,block:o},t[wt]={textureFormat:wt,colorRenderable:!1,textureFilterable:!0,block:o},t[Nt]={textureFormat:Nt,colorRenderable:!1,textureFilterable:!0,block:n},t[Ot]={textureFormat:Ot,colorRenderable:!1,textureFilterable:!0,block:n},t[Ut]={textureFormat:Ut,colorRenderable:!1,textureFilterable:!0,block:n},t[Lt]={textureFormat:Lt,colorRenderable:!1,textureFilterable:!0,block:n},t[Gt]={textureFormat:Gt,colorRenderable:!1,textureFilterable:!0,block:o},t[kt]={textureFormat:kt,colorRenderable:!1,textureFilterable:!0,block:o},t[Ht]={textureFormat:Ht,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},t[zt]={textureFormat:zt,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},t[Vt]={textureFormat:Vt,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:8,height:8}},t[gt]={textureFormat:gt,colorRenderable:!1,textureFilterable:!0,block:{bytes:32,width:16,height:8}},t[Xt]={textureFormat:Xt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},t[$t]={textureFormat:$t,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},t[Kt]={textureFormat:Kt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},t[Yt]={textureFormat:Yt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},t[Wt]={textureFormat:Wt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},t[Zt]={textureFormat:Zt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},t[qt]={textureFormat:qt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},t[jt]={textureFormat:jt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},t[Jt]={textureFormat:Jt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},t[Qt]={textureFormat:Qt,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},t[er]={textureFormat:er,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},t[tr]={textureFormat:tr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},t[rr]={textureFormat:rr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},t[nr]={textureFormat:nr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},t[or]={textureFormat:or,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:4,height:4}},t[ar]={textureFormat:ar,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:4}},t[ir]={textureFormat:ir,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:5,height:5}},t[sr]={textureFormat:sr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:5}},t[cr]={textureFormat:cr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:6,height:6}},t[ur]={textureFormat:ur,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:5}},t[lr]={textureFormat:lr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:6}},t[fr]={textureFormat:fr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:8,height:8}},t[xr]={textureFormat:xr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:5}},t[mr]={textureFormat:mr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:6}},t[dr]={textureFormat:dr,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:8}},t[Er]={textureFormat:Er,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:10,height:10}},t[br]={textureFormat:br,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:10}},t[_r]={textureFormat:_r,colorRenderable:!1,textureFilterable:!0,block:{bytes:16,width:12,height:12}},t[Rr]={textureFormat:Rr,colorRenderable:!1,textureFilterable:!0,block:o},t[Ar]={textureFormat:Ar,colorRenderable:!1,textureFilterable:!0,block:o},t[Sr]={textureFormat:Sr,colorRenderable:!1,textureFilterable:!0,block:o},t[yr]={textureFormat:yr,colorRenderable:!1,textureFilterable:!0,block:o},t[Tr]={textureFormat:Tr,colorRenderable:!1,textureFilterable:!0,block:n},t[Fr]={textureFormat:Fr,colorRenderable:!1,textureFilterable:!0,block:n},t[hr]={textureFormat:hr,colorRenderable:!1,textureFilterable:!0,block:n},t[Pr]={textureFormat:Pr,colorRenderable:!1,textureFilterable:!0,block:n},ke=t}const r=ke[e];if(!r)throw new Error("unknown internal format");return r}function qr(e,r){const n=j(e).bytesPerElementMap[r];if(n===void 0)throw new Error("type not supported for internal format");return n}function se(e){const r=j(e);if(!r)throw new Error("unknown internal format");return{format:r.textureFormat,type:r.type?.[0]??R}}function jr(e){return!!j(e).block}function _a(e,r){const t=j(e);return t.block?{blockWidth:t.block.width,blockHeight:t.block.height,bytesPerBlock:t.block.bytes}:{blockWidth:1,blockHeight:1,bytesPerBlock:qr(e,r)}}function Dr(e){return(e&e-1)===0}function Ra(e,r,t,n){if(!ie(e))return Dr(r)&&Dr(t);const o=j(n);return o.colorRenderable&&o.textureFilterable}function He(e){return j(e).textureFilterable}function Aa(e,r,t){return oe(r)?Xn(r):t||R}function Ee(e,r,t,n,o){if(o%1!==0)throw new Error("can't guess dimensions");if(!t&&!n){const a=Math.sqrt(o/(r===O?6:1));a%1===0?(t=a,n=a):(t=o,n=1)}else if(n){if(!t&&(t=o/n,t%1))throw new Error("can't guess dimensions")}else if(n=o/t,n%1)throw new Error("can't guess dimensions");return{width:t,height:n}}function L(e,r,t){let n,o,a;r.colorspaceConversion!==void 0&&(n=e.getParameter(be),e.pixelStorei(be,r.colorspaceConversion)),r.premultiplyAlpha!==void 0&&(o=e.getParameter(_e),e.pixelStorei(_e,r.premultiplyAlpha)),r.flipY!==void 0&&(a=e.getParameter(Re),e.pixelStorei(Re,r.flipY)),t(),n!==void 0&&e.pixelStorei(be,n),o!==void 0&&e.pixelStorei(_e,o),a!==void 0&&e.pixelStorei(Re,a)}function ze(e,r,t,n){const o=r[t];return{[t]:o===void 0?e.getParameter(n):o}}function qe(e,r){return{...r,...ze(e,r,"flipY",Re),...ze(e,r,"premultiplyAlpha",_e),...ze(e,r,"colorspaceConversion",be)}}function Jr(e){e.pixelStorei(Ze,4),ie(e)&&(e.pixelStorei($r,0),e.pixelStorei(Kr,0),e.pixelStorei(Yr,0),e.pixelStorei(Wr,0),e.pixelStorei(Zr,0))}function Sa(e,r,t,n){n.minMag&&(t.call(e,r,Se,n.minMag),t.call(e,r,ye,n.minMag)),n.min&&t.call(e,r,Se,n.min),n.mag&&t.call(e,r,ye,n.mag),n.wrap&&(t.call(e,r,Te,n.wrap),t.call(e,r,Fe,n.wrap),(r===$||Kn(e,r))&&t.call(e,r,_t,n.wrap)),n.wrapR&&t.call(e,r,_t,n.wrapR),n.wrapS&&t.call(e,r,Te,n.wrapS),n.wrapT&&t.call(e,r,Fe,n.wrapT),n.minLod!==void 0&&t.call(e,r,io,n.minLod),n.maxLod!==void 0&&t.call(e,r,so,n.maxLod),n.baseLevel!==void 0&&t.call(e,r,co,n.baseLevel),n.maxLevel!==void 0&&t.call(e,r,uo,n.maxLevel),n.compareFunc!==void 0&&t.call(e,r,fo,n.compareFunc),n.compareMode!==void 0&&t.call(e,r,lo,n.compareMode)}function Qr(e,r,t){const n=t.target||N;e.bindTexture(n,r),Sa(e,n,e.texParameteri,t)}function ya(e){return e=e||H.textureColor,oe(e)?e:new Uint8Array([e[0]*255,e[1]*255,e[2]*255,e[3]*255])}function en(e,r,{options:t,width:n,height:o,internalFormat:a,lastMipLevelUploaded:s}){t=t||H.textureOptions,a=a||S;const i=t.target||N;if(n=n||t.width,o=o||t.height,e.bindTexture(i,r),s>1){const c=Math.max(1,n>>s),u=Math.max(1,o>>s),f=c===1&&u===1,l=He(a)?Le:Ue,x=He(a)?f?eo:Le:Ue;e.texParameteri(i,ye,l),e.texParameteri(i,Se,x)}else if(Ra(e,n,o,a))e.generateMipmap(i);else{const c=He(a)?Le:Ue;e.texParameteri(i,Se,c),e.texParameteri(i,ye,c),e.texParameteri(i,Te,Ae),e.texParameteri(i,Fe,Ae)}}function Cr(e,r,t,n,o,a){en(e,r,{options:t,width:n,height:o,internalFormat:a})}function ae(e){return e.auto===!0||e.auto===void 0&&e.level===void 0}function Xe(e,r){return r=r||{},r.cubeFaceOrder||[We,to,ro,no,oo,ao]}function $e(e,r){const n=Xe(e,r).map(function(o,a){return{face:o,ndx:a}});return n.sort(function(o,a){return o.face-a.face}),n}function tn(e,r,t,n){n=n||H.textureOptions;const o=n.target||N,a=n.level||0;let s=t.width,i=t.height;const c=n.internalFormat||n.format||S,u=se(c),f=n.format||u.format,l=n.type||u.type;if(e.bindTexture(o,r),o===O){const x=t.width,E=t.height;let m,b;if(x/6===E)m=E,b=[0,0,1,0,2,0,3,0,4,0,5,0];else if(E/6===x)m=x,b=[0,0,0,1,0,2,0,3,0,4,0,5];else if(x/3===E/2)m=x/3,b=[0,0,1,0,2,0,0,1,1,1,2,1];else if(x/2===E/3)m=x/2,b=[0,0,1,0,0,1,1,1,0,2,1,2];else throw new Error(`can't figure out cube map from element: ${t.src?t.src:t.nodeName}`);const F=Xr();F?(F.canvas.width=m,F.canvas.height=m,s=m,i=m,L(e,n,()=>{$e(e,n).forEach(function(A){const P=b[A.ndx*2+0]*m,T=b[A.ndx*2+1]*m;F.drawImage(t,P,T,m,m,0,0,m,m),e.texImage2D(A.face,a,c,f,l,F.canvas)}),F.canvas.width=1,F.canvas.height=1})):typeof createImageBitmap<"u"&&(s=m,i=m,$e(e,n).forEach(function(A){const P=b[A.ndx*2+0]*m,T=b[A.ndx*2+1]*m;e.texImage2D(A.face,a,c,m,m,0,f,l,null),createImageBitmap(t,P,T,m,m,{premultiplyAlpha:"none",colorSpaceConversion:"none"}).then(function(I){L(e,n,()=>{e.bindTexture(o,r),e.texImage2D(A.face,a,c,f,l,I),ae(n)&&Cr(e,r,n,s,i,c)})})}))}else o===$||o===X?L(e,n,()=>{const x=Math.min(t.width,t.height),E=Math.max(t.width,t.height),m=E/x;if(m%1!==0)throw new Error("can not compute 3D dimensions of element");const b=t.width===E?1:0,F=t.height===E?1:0;e.pixelStorei(Ze,1),e.pixelStorei($r,t.width),e.pixelStorei(Kr,0),e.pixelStorei(Zr,0),e.texImage3D(o,a,c,x,x,x,0,f,l,null);for(let A=0;A<m;++A){const P=A*x*b,T=A*x*F;e.pixelStorei(Yr,P),e.pixelStorei(Wr,T),e.texSubImage3D(o,a,0,0,A,x,x,1,f,l,t)}Jr(e)}):L(e,n,()=>{e.texImage2D(o,a,c,f,l,t)});ae(n)&&Cr(e,r,n,s,i,c),Qr(e,r,n)}function ce(){}function Ta(e){if(typeof document<"u"){const r=document.createElement("a");return r.href=e,r.hostname===location.hostname&&r.port===location.port&&r.protocol===location.protocol}else{const r=new URL(location.href).origin;return new URL(e,location.href).origin===r}}function Fa(e,r){return r===void 0&&!Ta(e)?"anonymous":r}function ha(e,r,t){t=t||ce;let n;if(r=r!==void 0?r:H.crossOrigin,r=Fa(e,r),typeof Image<"u"){n=new Image,r!==void 0&&(n.crossOrigin=r);const o=function(){n.removeEventListener("error",a),n.removeEventListener("load",s),n=null},a=function(){const c="couldn't load image: "+e;Hr(c),t(c,n),o()},s=function(){t(null,n),o()};return n.addEventListener("error",a),n.addEventListener("load",s),n.src=e,n}else if(typeof ImageBitmap<"u"){let o,a;const s=function(){t(o,a)},i={};r&&(i.mode="cors"),fetch(e,i).then(function(c){if(!c.ok)throw c;return c.blob()}).then(function(c){return createImageBitmap(c,{premultiplyAlpha:"none",colorSpaceConversion:"none"})}).then(function(c){a=c,setTimeout(s)}).catch(function(c){o=c,setTimeout(s)}),n=null}return n}function rn(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof ImageData<"u"&&e instanceof ImageData||typeof HTMLElement<"u"&&e instanceof HTMLElement}function je(e,r,t){return rn(e)?(setTimeout(function(){t(null,e)}),e):ha(e,r,t)}function Je(e,r,t){t=t||H.textureOptions;const n=t.target||N;if(e.bindTexture(n,r),t.color===!1)return;const o=ya(t.color);if(n===O)for(let a=0;a<6;++a)e.texImage2D(We+a,0,S,1,1,0,S,R,o);else n===$||n===X?e.texImage3D(n,0,S,1,1,1,0,S,R,o):e.texImage2D(n,0,S,1,1,0,S,R,o)}function Pa(e,r,t,n){return n=n||ce,t=t||H.textureOptions,Je(e,r,t),t=qe(e,t),je(t.src,t.crossOrigin,function(a,s){a?n(a,r,s):(tn(e,r,s,t),n(null,r,s))})}function Da(e,r,t,n){n=n||ce;const o=t.src;if(o.length!==6)throw new Error("there must be 6 urls for a cubemap");const a=t.level||0,s=t.internalFormat||t.format||S,i=se(s),c=t.format||i.format,u=t.type||R,f=t.target||N;if(f!==O)throw new Error("target must be TEXTURE_CUBE_MAP");Je(e,r,t),t=qe(e,t);let l=6;const x=[],E=Xe(e,t);let m;function b(F){return function(A,P){--l,A?x.push(A):P.width!==P.height?x.push("cubemap face img is not a square: "+P.src):L(e,t,()=>{e.bindTexture(f,r),l===5?Xe().forEach(function(T){e.texImage2D(T,a,s,c,u,P)}):e.texImage2D(F,a,s,c,u,P),ae(t)&&e.generateMipmap(f)}),l===0&&n(x.length?x:void 0,r,m)}}m=o.map(function(F,A){return je(F,t.crossOrigin,b(E[A]))})}function Ca(e,r,t,n){n=n||ce;const o=t.src,a=t.internalFormat||t.format||S,s=se(a),i=t.format||s.format,c=t.type||R,u=t.target||X;if(u!==$&&u!==X)throw new Error("target must be TEXTURE_3D or TEXTURE_2D_ARRAY");Je(e,r,t),t=qe(e,t);let f=o.length;const l=[];let x;const E=t.level||0;let m=t.width,b=t.height;const F=o.length;let A=!0;function P(T){return function(I,B){--f,I?l.push(I):L(e,t,()=>{if(e.bindTexture(u,r),A){A=!1,m=t.width||B.width,b=t.height||B.height,e.texImage3D(u,E,a,m,b,F,0,i,c,null);for(let w=0;w<F;++w)e.texSubImage3D(u,E,0,0,w,m,b,1,i,c,B)}else{let w=B,p;(B.width!==m||B.height!==b)&&(p=Xr(),w=p.canvas,p.canvas.width=m,p.canvas.height=b,p.drawImage(B,0,0,m,b)),e.texSubImage3D(u,E,0,0,T,m,b,1,i,c,w),p&&w===p.canvas&&(p.canvas.width=0,p.canvas.height=0)}ae(t)&&e.generateMipmap(u)}),f===0&&n(l.length?l:void 0,r,x)}}x=o.map(function(T,I){return je(T,t.crossOrigin,P(I))})}function Ia(e,r,t,n){n=n||H.textureOptions;const o=n.target||N;e.bindTexture(o,r);const a=n.level||0,s=n.internalFormat||n.format||S,i=se(s),c=n.format||i.format,u=n.type||Aa(e,t,i.type);if(oe(t))t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));else{const b=kr(u);t=new b(t)}const{width:f,height:l,depth:x}=Ba(o,t,n,s,c,u),E=jr(s);Jr(e),e.pixelStorei(Ze,n.unpackAlignment||1);let m=0;return L(e,n,()=>{let b=0;const{blockWidth:F,blockHeight:A,bytesPerBlock:P}=_a(s,u);for(;b<t.byteLength;){const T=Math.max(1,f>>m),I=Math.max(1,l>>m),B=o===N?Math.max(1,x>>m):x,w=Math.ceil(T/F),p=Math.ceil(I/A),Nn=o===O?6:1,Ne=w*p*P*B*Nn;if(b+Ne>t.byteLength)throw new Error("src size does not match number of mip levels");const J=t.subarray(b/t.BYTES_PER_ELEMENT,(b+Ne)/t.BYTES_PER_ELEMENT),Q=a+m;if(o===O){const ct=J.length/6;$e(e,n).forEach(Oe=>{const ut=ct*Oe.ndx,lt=J.subarray(ut,ut+ct);E?e.compressedTexImage2D(Oe.face,Q,s,T,I,0,lt):e.texImage2D(Oe.face,Q,s,T,I,0,c,u,lt)})}else o===$||o===X?e.texImage3D(o,Q,s,T,I,B,0,c,u,J):E?e.compressedTexImage2D(o,Q,s,T,I,0,J):e.texImage2D(o,Q,s,T,I,0,c,u,J);if(++m,b+=Ne,T===1&&I===1&&B===1&&b!==t.byteLength)throw new Error("src size has more data than can fit in mip levels")}}),{width:f,height:l,depth:x,type:u,lastMipLevelUploaded:a+m-1}}function Ba(e,r,t,n,o,a){let s=t.width,i=t.height,c=t.depth;const u=jr(n);if(u){if(!s||!i)throw new Error("compressed texture needs to set width and height!");c=c||1}else{const f=qr(n,a),l=r.byteLength/f;if(l%1)throw new Error(`length wrong size for format: ${gr(ee,o)}`);if(u&&(!s||!i))throw new Error("compressed texture needs to set width and height!");let x;if(e===$||e===X)if(!s&&!i&&!c){const E=Math.cbrt(l);if(E%1!==0)throw new Error(`can't guess cube size of array of numElements: ${l}`);s=E,i=E,c=E}else s&&(!i||!c)?(x=Ee(ee,e,i,c,l/s),i=x.width,c=x.height):i&&(!s||!c)?(x=Ee(ee,e,s,c,l/i),s=x.width,c=x.height):(x=Ee(ee,e,s,i,l/c),s=x.width,i=x.height);else x=Ee(ee,e,s,i,l),s=x.width,i=x.height}return{width:s,height:i,depth:c}}function pa(e,r,t){const n=t.target||N;e.bindTexture(n,r);const o=t.level||0,a=t.internalFormat||t.format||S,s=se(a),i=t.format||s.format,c=t.type||s.type;L(e,t,()=>{if(n===O)for(let u=0;u<6;++u)e.texImage2D(We+u,o,a,t.width,t.height,0,i,c,null);else n===$||n===X?e.texImage3D(n,o,a,t.width,t.height,t.depth,0,i,c,null):e.texImage2D(n,o,a,t.width,t.height,0,i,c,null)})}function va(e,r,t){t=t||ce,r=r||H.textureOptions;const n=e.createTexture(),o=r.target||N;let a=r.width||1,s=r.height||1,i=0;const c=r.internalFormat||S;e.bindTexture(o,n),o===O&&(e.texParameteri(o,Te,Ae),e.texParameteri(o,Fe,Ae));let u=r.src;if(u)if(typeof u=="function"&&(u=u(e,r)),typeof u=="string")Pa(e,n,r,t);else if(oe(u)||Array.isArray(u)&&(typeof u[0]=="number"||Array.isArray(u[0])||oe(u[0]))){const f=Ia(e,n,u,r);a=f.width,s=f.height,i=f.lastMipLevelUploaded}else Array.isArray(u)&&(typeof u[0]=="string"||rn(u[0]))?o===O?Da(e,n,r,t):Ca(e,n,r,t):(tn(e,n,u,r),a=u.width,s=u.height);else pa(e,n,r);return ae(r)&&en(e,n,{options:r,width:a,height:s,internalFormat:c,lastMipLevelUploaded:i}),Qr(e,n,r),n}const Qe=Hr;function nn(e){return typeof document<"u"&&document.getElementById?document.getElementById(e):null}const he=33984,Pe=34962,Ma=35713,wa=35714,Na=35632,Oa=35633,Ua=35981,on=35718,La=35721,Ga=35971,ka=35382,Ha=35396,za=35398,Va=35392,ga=35395,De=5126,an=35664,sn=35665,cn=35666,et=5124,un=35667,ln=35668,fn=35669,xn=35670,mn=35671,dn=35672,En=35673,bn=35674,_n=35675,Rn=35676,Xa=35678,$a=35680,Ka=35679,Ya=35682,Wa=35685,Za=35686,qa=35687,ja=35688,Ja=35689,Qa=35690,ei=36289,ti=36292,ri=36293,tt=5125,An=36294,Sn=36295,yn=36296,ni=36298,oi=36299,ai=36300,ii=36303,si=36306,ci=36307,ui=36308,li=36311,Ce=3553,Ie=34067,rt=32879,Be=35866,d={};function Tn(e,r){return d[r].bindPoint}function fi(e,r){return function(t){e.uniform1f(r,t)}}function xi(e,r){return function(t){e.uniform1fv(r,t)}}function mi(e,r){return function(t){e.uniform2fv(r,t)}}function di(e,r){return function(t){e.uniform3fv(r,t)}}function Ei(e,r){return function(t){e.uniform4fv(r,t)}}function Fn(e,r){return function(t){e.uniform1i(r,t)}}function hn(e,r){return function(t){e.uniform1iv(r,t)}}function Pn(e,r){return function(t){e.uniform2iv(r,t)}}function Dn(e,r){return function(t){e.uniform3iv(r,t)}}function Cn(e,r){return function(t){e.uniform4iv(r,t)}}function bi(e,r){return function(t){e.uniform1ui(r,t)}}function _i(e,r){return function(t){e.uniform1uiv(r,t)}}function Ri(e,r){return function(t){e.uniform2uiv(r,t)}}function Ai(e,r){return function(t){e.uniform3uiv(r,t)}}function Si(e,r){return function(t){e.uniform4uiv(r,t)}}function yi(e,r){return function(t){e.uniformMatrix2fv(r,!1,t)}}function Ti(e,r){return function(t){e.uniformMatrix3fv(r,!1,t)}}function Fi(e,r){return function(t){e.uniformMatrix4fv(r,!1,t)}}function hi(e,r){return function(t){e.uniformMatrix2x3fv(r,!1,t)}}function Pi(e,r){return function(t){e.uniformMatrix3x2fv(r,!1,t)}}function Di(e,r){return function(t){e.uniformMatrix2x4fv(r,!1,t)}}function Ci(e,r){return function(t){e.uniformMatrix4x2fv(r,!1,t)}}function Ii(e,r){return function(t){e.uniformMatrix3x4fv(r,!1,t)}}function Bi(e,r){return function(t){e.uniformMatrix4x3fv(r,!1,t)}}function D(e,r,t,n){const o=Tn(e,r);return ie(e)?function(a){let s,i;!a||zr(e,a)?(s=a,i=null):(s=a.texture,i=a.sampler),e.uniform1i(n,t),e.activeTexture(he+t),e.bindTexture(o,s),e.bindSampler(t,i)}:function(a){e.uniform1i(n,t),e.activeTexture(he+t),e.bindTexture(o,a)}}function C(e,r,t,n,o){const a=Tn(e,r),s=new Int32Array(o);for(let i=0;i<o;++i)s[i]=t+i;return ie(e)?function(i){e.uniform1iv(n,s),i.forEach(function(c,u){e.activeTexture(he+s[u]);let f,l;!c||zr(e,c)?(f=c,l=null):(f=c.texture,l=c.sampler),e.bindSampler(t,l),e.bindTexture(a,f)})}:function(i){e.uniform1iv(n,s),i.forEach(function(c,u){e.activeTexture(he+s[u]),e.bindTexture(a,c)})}}d[De]={Type:Float32Array,size:4,setter:fi,arraySetter:xi};d[an]={Type:Float32Array,size:8,setter:mi,cols:2};d[sn]={Type:Float32Array,size:12,setter:di,cols:3};d[cn]={Type:Float32Array,size:16,setter:Ei,cols:4};d[et]={Type:Int32Array,size:4,setter:Fn,arraySetter:hn};d[un]={Type:Int32Array,size:8,setter:Pn,cols:2};d[ln]={Type:Int32Array,size:12,setter:Dn,cols:3};d[fn]={Type:Int32Array,size:16,setter:Cn,cols:4};d[tt]={Type:Uint32Array,size:4,setter:bi,arraySetter:_i};d[An]={Type:Uint32Array,size:8,setter:Ri,cols:2};d[Sn]={Type:Uint32Array,size:12,setter:Ai,cols:3};d[yn]={Type:Uint32Array,size:16,setter:Si,cols:4};d[xn]={Type:Uint32Array,size:4,setter:Fn,arraySetter:hn};d[mn]={Type:Uint32Array,size:8,setter:Pn,cols:2};d[dn]={Type:Uint32Array,size:12,setter:Dn,cols:3};d[En]={Type:Uint32Array,size:16,setter:Cn,cols:4};d[bn]={Type:Float32Array,size:32,setter:yi,rows:2,cols:2};d[_n]={Type:Float32Array,size:48,setter:Ti,rows:3,cols:3};d[Rn]={Type:Float32Array,size:64,setter:Fi,rows:4,cols:4};d[Wa]={Type:Float32Array,size:32,setter:hi,rows:2,cols:3};d[Za]={Type:Float32Array,size:32,setter:Di,rows:2,cols:4};d[qa]={Type:Float32Array,size:48,setter:Pi,rows:3,cols:2};d[ja]={Type:Float32Array,size:48,setter:Ii,rows:3,cols:4};d[Ja]={Type:Float32Array,size:64,setter:Ci,rows:4,cols:2};d[Qa]={Type:Float32Array,size:64,setter:Bi,rows:4,cols:3};d[Xa]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ce};d[$a]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ie};d[Ka]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:rt};d[Ya]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ce};d[ei]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Be};d[ti]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Be};d[ri]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ie};d[ni]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ce};d[oi]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:rt};d[ai]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ie};d[ii]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Be};d[si]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ce};d[ci]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:rt};d[ui]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Ie};d[li]={Type:null,size:0,setter:D,arraySetter:C,bindPoint:Be};function pe(e,r){return function(t){if(t.value)switch(e.disableVertexAttribArray(r),t.value.length){case 4:e.vertexAttrib4fv(r,t.value);break;case 3:e.vertexAttrib3fv(r,t.value);break;case 2:e.vertexAttrib2fv(r,t.value);break;case 1:e.vertexAttrib1fv(r,t.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else e.bindBuffer(Pe,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,t.numComponents||t.size,t.type||De,t.normalize||!1,t.stride||0,t.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(r,t.divisor||0)}}function z(e,r){return function(t){if(t.value)if(e.disableVertexAttribArray(r),t.value.length===4)e.vertexAttrib4iv(r,t.value);else throw new Error("The length of an integer constant value must be 4!");else e.bindBuffer(Pe,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||et,t.stride||0,t.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(r,t.divisor||0)}}function ve(e,r){return function(t){if(t.value)if(e.disableVertexAttribArray(r),t.value.length===4)e.vertexAttrib4uiv(r,t.value);else throw new Error("The length of an unsigned integer constant value must be 4!");else e.bindBuffer(Pe,t.buffer),e.enableVertexAttribArray(r),e.vertexAttribIPointer(r,t.numComponents||t.size,t.type||tt,t.stride||0,t.offset||0),e.vertexAttribDivisor&&e.vertexAttribDivisor(r,t.divisor||0)}}function nt(e,r,t){const n=t.size,o=t.count;return function(a){e.bindBuffer(Pe,a.buffer);const s=a.size||a.numComponents||n,i=s/o,c=a.type||De,f=d[c].size*s,l=a.normalize||!1,x=a.offset||0,E=f/o;for(let m=0;m<o;++m)e.enableVertexAttribArray(r+m),e.vertexAttribPointer(r+m,i,c,l,f,x+E*m),e.vertexAttribDivisor&&e.vertexAttribDivisor(r+m,a.divisor||0)}}const y={};y[De]={size:4,setter:pe};y[an]={size:8,setter:pe};y[sn]={size:12,setter:pe};y[cn]={size:16,setter:pe};y[et]={size:4,setter:z};y[un]={size:8,setter:z};y[ln]={size:12,setter:z};y[fn]={size:16,setter:z};y[tt]={size:4,setter:ve};y[An]={size:8,setter:ve};y[Sn]={size:12,setter:ve};y[yn]={size:16,setter:ve};y[xn]={size:4,setter:z};y[mn]={size:8,setter:z};y[dn]={size:12,setter:z};y[En]={size:16,setter:z};y[bn]={size:4,setter:nt,count:2};y[_n]={size:9,setter:nt,count:3};y[Rn]={size:16,setter:nt,count:4};const pi=/ERROR:\s*\d+:(\d+)/gi;function vi(e,r="",t=0){const n=[...r.matchAll(pi)],o=new Map(n.map((a,s)=>{const i=parseInt(a[1]),c=n[s+1],u=c?c.index:r.length,f=r.substring(a.index,u);return[i-1,f]}));return e.split(`
`).map((a,s)=>{const i=o.get(s);return`${s+1+t}: ${a}${i?`

^^^ ${i}`:""}`}).join(`
`)}const Ir=/^[ \t]*\n/;function In(e){let r=0;return Ir.test(e)&&(r=1,e=e.replace(Ir,"")),{lineOffset:r,shaderSource:e}}function Mi(e,r){return e.errorCallback(r),e.callback&&setTimeout(()=>{e.callback(`${r}
${e.errors.join(`
`)}`)}),null}function wi(e,r,t,n){if(n=n||Qe,!e.getShaderParameter(t,Ma)){const a=e.getShaderInfoLog(t),{lineOffset:s,shaderSource:i}=In(e.getShaderSource(t)),c=`${vi(i,a,s)}
Error compiling ${gr(e,r)}: ${a}`;return n(c),c}return""}function ot(e,r,t){let n,o,a;if(typeof r=="function"&&(t=r,r=void 0),typeof e=="function")t=e,e=void 0;else if(e&&!Array.isArray(e)){const u=e;t=u.errorCallback,e=u.attribLocations,n=u.transformFeedbackVaryings,o=u.transformFeedbackMode,a=u.callback}const s=t||Qe,i=[],c={errorCallback(u,...f){i.push(u),s(u,...f)},transformFeedbackVaryings:n,transformFeedbackMode:o,callback:a,errors:i};{let u={};Array.isArray(e)?e.forEach(function(f,l){u[f]=r?r[l]:l}):u=e||{},c.attribLocations=u}return c}const Ni=["VERTEX_SHADER","FRAGMENT_SHADER"];function Oi(e,r){if(r.indexOf("frag")>=0)return Na;if(r.indexOf("vert")>=0)return Oa}function Ui(e,r,t){const n=e.getAttachedShaders(r);for(const o of n)t.has(o)||e.deleteShader(o);e.deleteProgram(r)}const Li=(e=0)=>new Promise(r=>setTimeout(r,e));function Gi(e,r,t){const n=e.createProgram(),{attribLocations:o,transformFeedbackVaryings:a,transformFeedbackMode:s}=ot(t);for(let i=0;i<r.length;++i){let c=r[i];if(typeof c=="string"){const u=nn(c),f=u?u.text:c;let l=e[Ni[i]];u&&u.type&&(l=Oi(e,u.type)||l),c=e.createShader(l),e.shaderSource(c,In(f).shaderSource),e.compileShader(c)}e.attachShader(n,c)}Object.entries(o).forEach(([i,c])=>e.bindAttribLocation(n,c,i));{let i=a;i&&(i.attribs&&(i=i.attribs),Array.isArray(i)||(i=Object.keys(i)),e.transformFeedbackVaryings(n,i,s||Ua))}return e.linkProgram(n),n}function ki(e,r,t,n,o){const a=ot(t,n,o),s=new Set(r),i=Gi(e,r,a);function c(u,f){const l=zi(u,f,a.errorCallback);return l&&Ui(u,f,s),l}if(a.callback){Hi(e,i).then(()=>{const u=c(e,i);a.callback(u,u?void 0:i)});return}return c(e,i)?void 0:i}async function Hi(e,r){const t=e.getExtension("KHR_parallel_shader_compile"),n=t?(a,s)=>a.getProgramParameter(s,t.COMPLETION_STATUS_KHR):()=>!0;let o=0;do await Li(o),o=1e3/60;while(!n(e,r))}function zi(e,r,t){if(t=t||Qe,!e.getProgramParameter(r,wa)){const o=e.getProgramInfoLog(r);t(`Error in program linking: ${o}`);const s=e.getAttachedShaders(r).map(i=>wi(e,e.getShaderParameter(i,e.SHADER_TYPE),i,t));return`${o}
${s.filter(i=>i).join(`
`)}`}}function Vi(e,r,t,n,o){return ki(e,r,t,n,o)}function Bn(e){const r=e.name;return r.startsWith("gl_")||r.startsWith("webgl_")}const gi=/(\.|\[|]|\w+)/g,Xi=e=>e>="0"&&e<="9";function $i(e,r,t,n){const o=e.split(gi).filter(i=>i!=="");let a=0,s="";for(;;){const i=o[a++];s+=i;const c=Xi(i[0]),u=c?parseInt(i):i;if(c&&(s+=o[a++]),a===o.length){t[u]=r;break}else{const l=o[a++],x=l==="[",E=t[u]||(x?[]:{});t[u]=E,t=E,n[s]=n[s]||(function(m){return function(b){pn(m,b)}})(E),s+=l}}}function Ki(e,r){let t=0;function n(i,c,u){const f=c.name.endsWith("[0]"),l=c.type,x=d[l];if(!x)throw new Error(`unknown type: 0x${l.toString(16)}`);let E;if(x.bindPoint){const m=t;t+=c.size,f?E=x.arraySetter(e,l,m,u,c.size):E=x.setter(e,l,m,u,c.size)}else x.arraySetter&&f?E=x.arraySetter(e,u):E=x.setter(e,u);return E.location=u,E}const o={},a={},s=e.getProgramParameter(r,on);for(let i=0;i<s;++i){const c=e.getActiveUniform(r,i);if(Bn(c))continue;let u=c.name;u.endsWith("[0]")&&(u=u.substr(0,u.length-3));const f=e.getUniformLocation(r,c.name);if(f){const l=n(r,c,f);o[u]=l,$i(u,l,a,o)}}return o}function Yi(e,r){const t={},n=e.getProgramParameter(r,Ga);for(let o=0;o<n;++o){const a=e.getTransformFeedbackVarying(r,o);t[a.name]={index:o,type:a.type,size:a.size}}return t}function Wi(e,r){const t=e.getProgramParameter(r,on),n=[],o=[];for(let i=0;i<t;++i){o.push(i),n.push({});const c=e.getActiveUniform(r,i);n[i].name=c.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach(function(i){const c=i[0],u=i[1];e.getActiveUniforms(r,o,e[c]).forEach(function(f,l){n[l][u]=f})});const a={},s=e.getProgramParameter(r,ka);for(let i=0;i<s;++i){const c=e.getActiveUniformBlockName(r,i),u={index:e.getUniformBlockIndex(r,c),usedByVertexShader:e.getActiveUniformBlockParameter(r,i,Ha),usedByFragmentShader:e.getActiveUniformBlockParameter(r,i,za),size:e.getActiveUniformBlockParameter(r,i,Va),uniformIndices:e.getActiveUniformBlockParameter(r,i,ga)};u.used=u.usedByVertexShader||u.usedByFragmentShader,a[c]=u}return{blockSpecs:a,uniformData:n}}function pn(e,r){for(const t in r){const n=e[t];typeof n=="function"?n(r[t]):pn(e[t],r[t])}}function K(e,...r){const t=e.uniformSetters||e,n=r.length;for(let o=0;o<n;++o){const a=r[o];if(Array.isArray(a)){const s=a.length;for(let i=0;i<s;++i)K(t,a[i])}else for(const s in a){const i=t[s];i&&i(a[s])}}}function Zi(e,r){const t={},n=e.getProgramParameter(r,La);for(let o=0;o<n;++o){const a=e.getActiveAttrib(r,o);if(Bn(a))continue;const s=e.getAttribLocation(r,a.name),i=y[a.type],c=i.setter(e,s,i);c.location=s,t[a.name]=c}return t}function qi(e,r){for(const t in r){const n=e[t];n&&n(r[t])}}function Br(e,r){const t=Ki(e,r),n=Zi(e,r),o={program:r,uniformSetters:t,attribSetters:n,uniformLocations:Object.fromEntries(Object.entries(t).map(([a,s])=>[a,s.location])),attribLocations:Object.fromEntries(Object.entries(n).map(([a,s])=>[a,s.location]))};return ie(e)&&(o.uniformBlockSpec=Wi(e,r),o.transformFeedbackInfo=Yi(e,r)),o}const ji=/\s|{|}|;/;function at(e,r,t,n,o){const a=ot(t,n,o),s=[];if(r=r.map(function(u){if(!ji.test(u)){const f=nn(u);if(f)u=f.text;else{const l=`no element with id: ${u}`;a.errorCallback(l),s.push(l)}}return u}),s.length)return Mi(a,"");const i=a.callback;i&&(a.callback=(u,f)=>{i(u,u?void 0:Br(e,f))});const c=Vi(e,r,a);return c?Br(e,c):null}const Ji=34963;function Qi(e,r,t,n){const o=e.createVertexArray();return e.bindVertexArray(o),qi(r,t),n&&e.bindBuffer(Ji,n),e.bindVertexArray(null),o}function es(e,r,t){return Qi(e,r.attribSetters||r,t.attribs,t.indices)}const ts=""+new URL("image-CkOZRYh0.png",import.meta.url).href;var vn=`#version 300 es
precision highp float;out vec4 fragColor;void main(){fragColor=vec4(1);}`,rs=`#version 300 es
precision highp float;uniform vec2 resolution;uniform highp sampler2D u_texture;out vec2 vNow;out vec2 vMove;float rand(vec2 st){return fract(sin(dot(st.xy,vec2(12.9898,78.233)))*43758.5453123);}void main(){int id=gl_VertexID;int w=int(resolution.x);int x=int(id % w);int y=int(id/w);vec2 base=vec2(x,y)/resolution;float angle=rand(base+1.0)*6.28;float speed=rand(base+2.0);vNow=vec2(rand(base),rand(base-1.0))*resolution;vMove=vec2(sin(angle),cos(angle))*100.0;}`,ns=`#version 300 es
precision highp float;uniform float delta,current;uniform vec2 resolution,mouse;in vec2 now;in vec2 move;out vec2 vNow;out vec2 vMove;uniform float attractionStrength;uniform float maxSpeed;uniform float mouseRadius;uniform float repulsionStrength;uniform float damping;void main(){int id=gl_VertexID;int w=int(resolution.x);int x=id % w;int y=id/w;vec2 base=vec2(float(x),float(y));vec2 toBase=base-now;float distToBase=length(toBase);vec2 attractionForce=toBase*attractionStrength;vec2 toMouse=now-mouse;float distToMouse=length(toMouse);vec2 repulsionForce=vec2(0.0);if(distToMouse<mouseRadius&&distToMouse>0.0){float falloff=mouseRadius-(distToMouse/mouseRadius);repulsionForce=normalize(toMouse)*repulsionStrength*falloff/distToMouse;}vec2 totalForce=attractionForce+repulsionForce;vMove=move*damping+totalForce*delta;float currentSpeed=length(vMove);if(currentSpeed>maxSpeed){vMove=normalize(vMove)*maxSpeed;}vNow=now+vMove*delta;}`,os=`#version 300 es
uniform vec2 resolution,mouse;uniform sampler2D u_texture;in vec2 now;in vec2 move;vec2 mirror=vec2(1,-1);out vec4 color;void main(){int id=gl_VertexID;int w=int(resolution.x);int x=int(id % w);int y=int(id/w);ivec2 base=ivec2(x,y);vec2 real=(now/resolution)*2.0-1.0;color=texelFetch(u_texture,base,0);gl_Position=vec4(real*mirror,0,1);gl_PointSize=1.0+length(move)/1000.0;}`,as=`#version 300 es
out highp vec4 fragColor;in highp vec4 color;void main(){fragColor=color;}`;const pr=.001;function is(e){var r=requestAnimationFrame(n),t=performance.now()*pr;function n(o){o*=pr,r=requestAnimationFrame(n),e(Math.min(o-t,.1),t=o)}return()=>{cancelAnimationFrame(r)}}function ss(e,r){const t=new AbortController;let n=!1;const o=a=>{if(!a)return r(-1/0,-1/0);const{clientX:s,clientY:i}=a,{x:c,y:u,width:f,height:l}=e.getBoundingClientRect(),x=f/e.offsetWidth,E=l/e.offsetHeight;r((s-c)/x,(i-u)/E)};return addEventListener("pointerdown",a=>{n=!0,o(a)},t),addEventListener("pointermove",a=>{n&&o(a)},t),addEventListener("pointerup",()=>{n=!1,o()},t),o(),()=>{t.abort()}}const Ke=document.createElement("canvas"),vr=Ke.getContext("2d");async function cs(e){const r=new Image;return await new Promise((t,n)=>{r.onload=()=>t(),r.onerror=n,r.src=e}),Ke.width=r.width,Ke.height=r.height,vr.drawImage(r,0,0),vr.getImageData(0,0,r.width,r.height)}function us(e,{width:r,height:t,data:n}){return va(e,{src:n,width:r,height:t,format:e.RGBA,type:e.UNSIGNED_BYTE,min:e.LINEAR,mag:e.LINEAR,maxLevel:1,auto:!1})}function ls(e,r){return Array.from({length:e},(t,n)=>r(n))}const ue=document.querySelector("canvas");if(!ue)throw new Error("Can not find canvas");const _=ue.getContext("webgl2");if(!_)throw new Error("Can not create webgl2 context");const it=at(_,[rs,vn],{transformFeedbackVaryings:["vNow","vMove"],transformFeedbackMode:_.SEPARATE_ATTRIBS}),G=at(_,[ns,vn],{transformFeedbackVaryings:["vNow","vMove"],transformFeedbackMode:_.SEPARATE_ATTRIBS}),fs={attractionStrength:80,maxSpeed:1200,mouseRadius:200,repulsionStrength:1e3,damping:.95},Me=at(_,[os,as]),k=await cs(ts),Mn=us(_,k),le=_s(_,k),xs=wn(_,G,le),ms=wn(_,Me,le),ne=Rs(le.length),st=k.width*k.height;ue.width=k.width;ue.height=k.height;const we=[k.width,k.height];_.viewport(0,0,...we);_.useProgram(it.program);K(it,{u_texture:Mn,resolution:we});_.useProgram(G.program);K(G,{u_texture:Mn,resolution:we});K(G,fs);_.useProgram(Me.program);K(Me,{resolution:we});_.enable(_.BLEND);_.blendFuncSeparate(_.SRC_ALPHA,_.ONE_MINUS_SRC_ALPHA,_.ONE,_.ONE_MINUS_SRC_ALPHA);_.disable(_.DEPTH_TEST);ds(_);ss(ue,(...e)=>{_.useProgram(G.program),K(G,{mouse:e})});is((e,r)=>{Es(_,e,r),bs(_)});function ds(e){e.useProgram(it.program),e.enable(e.RASTERIZER_DISCARD),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,le[ne.now].tf),e.beginTransformFeedback(e.POINTS),e.drawArrays(e.POINTS,0,st),e.endTransformFeedback(),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),e.disable(e.RASTERIZER_DISCARD)}function Es(e,r,t){e.useProgram(G.program),K(G,{delta:r,current:t}),e.bindBuffer(e.ARRAY_BUFFER,null),e.enable(e.RASTERIZER_DISCARD),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,le[ne.next].tf),e.beginTransformFeedback(e.POINTS),e.bindVertexArray(xs[ne.now]),e.drawArrays(e.POINTS,0,st),e.endTransformFeedback(),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),e.disable(e.RASTERIZER_DISCARD),ne.tick()}function bs(e){e.useProgram(Me.program),e.clear(e.COLOR_BUFFER_BIT),e.bindVertexArray(ms[ne.now]),e.drawArrays(e.POINTS,0,st)}function _s(e,r,t=2){const n=new Float32Array(r.width*r.height*2);return ls(t,()=>{const o=xt(e,n,"now"),a=xt(e,n,"move"),s=e.createTransformFeedback();return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s),e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,0,o),e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,1,a),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),{now:o,move:a,tf:s}})}function wn(e,r,t){return t.map(n=>es(e,r,{attribs:{now:{buffer:n.now,numComponents:2,type:e.FLOAT},move:{buffer:n.move,numComponents:2,type:e.FLOAT}}}))}function Rs(e){let r=0;return{get now(){return r},get next(){return(r+1)%e},tick(){r=this.next}}}
